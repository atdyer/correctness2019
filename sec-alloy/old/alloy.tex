\section{Lightweight Formal Methods}
\label{sec:alloy}

...
An additional aspect of lightweight formal methods is an incremental style of modeling, which tools like Alloy support by offering immediate feedback while models are being constructed: we start with a minimal set of constraints and ``grow'' them via conjunction.

\subsection{Alloy}

The tool used in our approach is Alloy, a declarative modeling language combining first-order logic with relational calculus and associated quantifiers and operators, along with transitive closure.  It offers rich data modeling features based on class-like structures and an automatic form of analysis that is performed within a bounded scope using a SAT solver.  For \emph{simulation}, the analyzer can be directed to look for instances satisfying a property of interest.  For \emph{checking}, it looks for an instance violating an assertion: a counterexample.  The approach is \emph{scope complete} in the sense that all cases are checked within user-specified bounds.  Alloy's logic supports three distinct styles of expression, that of predicate calculus, navigation expressions, and relational calculus.  The language used for modeling is also used for specifying properties of interest and assertions.  Alloy supports expressions with integer values and basic arithmetic operations.

\subsection{Data Abstraction}

Proof obligations: mathematical formula to be proven in order to ensure that a component is correct.

Start example here.

\subsection{Data Refinement}

The process of data refinement involves removing nondeterminism, or uncertainty, from an abstract model~\cite{woodcock1996}.  While an abstract model may omit certain design choices, a refinement can resolve some of these choices, removing uncertainty and approaching the level of a concrete implementation.

\begin{figure}
\begin{tikzpicture}
\begin{tikzcd}[sep=huge]
AS \arrow{r}[description]{AF} & AS' \\
IS \arrow{u}[description]{\alpha} \arrow{r}[description]{IF} & IS' \arrow{u}[description]{\alpha}
\end{tikzcd}
\end{tikzpicture}
\caption{TODO: An abstract state (AS) becomes new abstract state (AS') through an abstract function (AF).  An implemented state (IS) becomes a new implemented state (IS') through an implemented function (IF).  The implemented states are related to the abstract states through the abstraction function $\alpha$.}
\end{figure}

Abstraction function and representation invariant discussion.

Continue example with refinement here.